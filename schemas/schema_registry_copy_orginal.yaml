version: 1

defaults:
  file_extension: ".nzf"
  delimiter: "Ã‡"
  encoding: "latin-1"
  header: true
  trim_headers: true
  trim_values: true
  allow_additional_columns: true

tables:

  pvr00100:
    file_patterns: [ "*PVR00100*.nzf", "PVR00100.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Run and scenario metadata for portfolio valuation runs.
      Use this table to understand which scenarios, dates, and configuration were used for a given run and portfolio snapshot.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR00100"
      - "portfolio valuation"
      - "valuation results"
      - "pvr"
      - "scenario"
      - "scenarios"
      - "interest rates"
      - "rates"
      - "payment terms"
      - "coupon"
      - "prepayment"
      - "cpr"

    primary_key: [ "DmrRunID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "as-of"
      - "payment-structure"
      - "portfolio"
      - "prepayment"
      - "rates"
      - "run-metadata"
      - "scenarios"
      - "valuation"

    columns:
      DmrRunID:
        type: string
        description: "Dmr run id."
        aliases: [ "run id", "dmr run", "batch id", "dmr run id" ]

      PortfolioID:
        type: string
        description: "Portfolio id."
        aliases: [ "book", "account", "portfolio", "portfolio id" ]

      PortfolioDate:
        type: date
        description: "Portfolio date."
        aliases: [ "date", "portfolio date", "portfolio as of date" ]

      ValuationDate:
        type: date
        description: "Valuation date."
        aliases: [ "date", "valuation date" ]

      InterestRateDate:
        type: date
        description: "Interest rate date."
        aliases: [ "date", "interest rate date" ]

      InterestRateScenario:
        type: string
        description: "Interest rate scenario."
        aliases: [ "interest rate scenario" ]

      VolatilityDate:
        type: date
        description: "Volatility date."
        aliases: [ "date", "volatility date" ]

      VolatilityScenario:
        type: string
        description: "Volatility scenario."
        aliases: [ "volatility scenario" ]

      PrepaymentScenario:
        type: string
        description: "Prepayment scenario."
        aliases: [ "prepayment scenario" ]

      SpreadScenario:
        type: string
        description: "Spread scenario."
        aliases: [ "spread scenario" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Count instruments by portfolio for a given run/date using PVR00100"
      - "Show key metrics grouped by portfolio or instrument from PVR00100"
      - "Filter by scenario/date fields and summarize results from PVR00100"

  pvr00200:
    file_patterns: [ "*PVR00200*.nzf", "PVR00200.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Run-level metadata for PRiMA portfolio valuation (scenario selection, run dates, versions).
      Use this table to audit run configuration and scenario versions used in a valuation run.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR00200"
      - "portfolio valuation"
      - "valuation results"
      - "pvr"
      - "scenario"
      - "scenarios"
      - "interest rates"
      - "rates"
      - "payment terms"
      - "coupon"
      - "prepayment"
      - "cpr"

    primary_key: [ "RunID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "payment-structure"
      - "portfolio"
      - "prepayment"
      - "rates"
      - "run-metadata"
      - "scenarios"
      - "valuation"

    columns:
      RunID:
        type: string
        description: "Run id."
        aliases: [ "run", "run id" ]

      RunName:
        type: string
        description: "Run name."
        aliases: [ "name", "run name" ]

      RunDescription:
        type: string
        description: "Run description."
        aliases: [ "description", "run description" ]

      RunUserID:
        type: string
        description: "Run user id."
        aliases: [ "run user", "run user id" ]

      VnVersion:
        type: int
        description: "Vn version."
        aliases: [ "vn version" ]

      PrimaVersion:
        type: int
        description: "Prima version."
        aliases: [ "prima version" ]

      PrimaConfiguration:
        type: string
        description: "Prima configuration."
        aliases: [ "prima configuration" ]

      InterestRateScenario:
        type: float
        description: "Interest rate scenario."
        aliases: [ "ir scenario", "rate scenario", "interest rate scenario" ]

      VolatilityScenario:
        type: string
        description: "Volatility scenario."
        aliases: [ "volatility scenario" ]

      PrepaymentScenario:
        type: string
        description: "Prepayment scenario."
        aliases: [ "prepayment scenario" ]

      HpaScenario:
        type: string
        description: "Hpa scenario."
        aliases: [ "hpa scenario" ]

      InterestRateDate:
        type: date
        description: "Interest rate date."
        aliases: [ "date", "interest rate date" ]

      VolatilityDate:
        type: date
        description: "Volatility date."
        aliases: [ "date", "volatility date" ]

      HpiAsOfDate:
        type: date
        description: "Hpi as of date."
        aliases: [ "date", "hpi as of date" ]

      HpiUtilityDate:
        type: date
        description: "Hpi utility date."
        aliases: [ "date", "hpi utility date" ]

      ValuationDate:
        type: date
        description: "Valuation date."
        aliases: [ "date", "valuation date" ]

      RunDate:
        type: date
        description: "Run date."
        aliases: [ "date", "run date" ]

      SpreadScenario:
        type: float
        description: "Spread scenario."
        aliases: [ "spread scenario" ]

      ProductSegmentsFilter:
        type: string
        description: "Product segments filter."
        aliases: [ "product segments filter" ]

      InterestRateScenarioVersion:
        type: float
        description: "Interest rate scenario version."
        aliases: [ "interest rate scenario version" ]

      HpaScenarioVersion:
        type: int
        description: "Hpa scenario version."
        aliases: [ "hpa scenario version" ]

      VolatilityScenarioVersion:
        type: int
        description: "Volatility scenario version."
        aliases: [ "volatility scenario version" ]

      PrepaymentScenarioVersion:
        type: int
        description: "Prepayment scenario version."
        aliases: [ "prepayment scenario version" ]

      PrimaConfigurationVersion:
        type: int
        description: "Prima configuration version."
        aliases: [ "prima configuration version" ]

      SpreadScenarioVersion:
        type: float
        description: "Spread scenario version."
        aliases: [ "spread scenario version" ]

      ProductSegmentsFilterVersion:
        type: int
        description: "Product segments filter version."
        aliases: [ "product segments filter version" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Count instruments by portfolio for a given run/date using PVR00200"
      - "Show key metrics grouped by portfolio or instrument from PVR00200"
      - "Filter by scenario/date fields and summarize results from PVR00200"

  pvr00300:
    file_patterns: [ "*PVR00300*.nzf", "PVR00300.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Instrument-level pricing and prepayment model outputs used in valuation (OAS, price, factors, errors).
      Use this table to analyze pricing inputs/outputs and modeling diagnostics by aggregated instrument.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR00300"
      - "portfolio valuation"
      - "valuation results"
      - "pvr"
      - "interest rates"
      - "rates"
      - "payment terms"
      - "coupon"
      - "pricing"
      - "oas"
      - "price"
      - "prepayment"

    primary_key: [ "AggrInstrumentID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "analytics"
      - "payment-structure"
      - "portfolio"
      - "prepayment"
      - "pricing"
      - "rates"
      - "valuation"

    columns:
      AggrInstrumentID:
        type: string
        description: "Aggr instrument id."
        aliases: [ "aggr instrument", "aggr instrument id" ]

      PrepaymentModel:
        type: string
        description: "Prepayment model."
        aliases: [ "prepayment model" ]

      Oas:
        type: float
        description: "Oas."
        aliases: [ "oas" ]

      Price:
        type: float
        description: "Price."
        aliases: [ "price" ]

      InputOas:
        type: float
        description: "Input oas."
        aliases: [ "input oas" ]

      InputOasTypeCode:
        type: float
        description: "Input oas type code."
        aliases: [ "code", "input oas type", "input oas type code" ]

      EstimatedFactor:
        type: float
        description: "Estimated factor."
        aliases: [ "estimated factor" ]

      LagOneFactor:
        type: float
        description: "Lag one factor."
        aliases: [ "lag one factor" ]

      LagTwoFactor:
        type: float
        description: "Lag two factor."
        aliases: [ "lag two factor" ]

      LagOnePrepayPenaltyRate:
        type: float
        description: "Lag one prepay penalty rate."
        aliases: [ "lag one prepay penalty rate" ]

      LagTwoPrepayPenaltyRate:
        type: float
        description: "Lag two prepay penalty rate."
        aliases: [ "lag two prepay penalty rate" ]

      PaydownLagOneAmortFactor:
        type: float
        description: "Paydown lag one amort factor."
        aliases: [ "paydown lag one amort factor" ]

      PaydownLagTwoAmortFactor:
        type: float
        description: "Paydown lag two amort factor."
        aliases: [ "paydown lag two amort factor" ]

      PaydownLagOnePrepayFactor:
        type: float
        description: "Paydown lag one prepay factor."
        aliases: [ "paydown lag one prepay factor" ]

      PaydownLagTwoPrepayFactor:
        type: float
        description: "Paydown lag two prepay factor."
        aliases: [ "paydown lag two prepay factor" ]

      PaydownLagOneDefaultFactor:
        type: float
        description: "Paydown lag one default factor."
        aliases: [ "paydown lag one default factor" ]

      PaydownLagTwoDefaultFactor:
        type: float
        description: "Paydown lag two default factor."
        aliases: [ "paydown lag two default factor" ]

      LagOneLossFactor:
        type: float
        description: "Lag one loss factor."
        aliases: [ "lag one loss factor" ]

      LagTwoLossFactor:
        type: float
        description: "Lag two loss factor."
        aliases: [ "lag two loss factor" ]

      MethodologyName:
        type: string
        description: "Methodology name."
        aliases: [ "methodology name" ]

      PricingSource:
        type: string
        description: "Pricing source."
        aliases: [ "pricing source" ]

      PricingDate:
        type: date
        description: "Pricing date."
        aliases: [ "date", "pricing date" ]

      BenchMarkRunID:
        type: string
        description: "Bench mark run id."
        aliases: [ "bench mark run", "bench mark run id" ]

      MappingGridCoordinate:
        type: string
        description: "Mapping grid coordinate."
        aliases: [ "mapping grid coordinate" ]

      IntexCduPath:
        type: string
        description: "Intex cdu path."
        aliases: [ "intex cdu path" ]

      IntexCdiPath:
        type: string
        description: "Intex cdi path."
        aliases: [ "intex cdi path" ]

      IntexDataTime:
        type: string
        description: "Intex data time."
        aliases: [ "intex data time" ]

      ModelingProductType:
        type: string
        description: "Modeling product type."
        aliases: [ "modeling product type" ]

      ModelingError:
        type: string
        description: "Modeling error."
        aliases: [ "modeling error" ]

      CfError:
        type: string
        description: "Cf error."
        aliases: [ "cf error" ]

      OasError:
        type: float
        description: "Oas error."
        aliases: [ "oas error" ]

      VNMLFileName:
        type: string
        description: "Vnmlfile name."
        aliases: [ "vnmlfile name" ]

      OasAdjustment:
        type: float
        description: "Oas adjustment."
        aliases: [ "oas adjustment" ]

      PrepaymentChooserType:
        type: string
        description: "Prepayment chooser type."
        aliases: [ "prepayment chooser type" ]

      UseAdCurrentCoupon:
        type: float
        description: "Use ad current coupon."
        aliases: [ "use ad current coupon" ]

      UseAdHpi:
        type: string
        description: "Use ad hpi."
        aliases: [ "use ad hpi" ]

      OriginalActiveBorrowerFraction:
        type: string
        description: "Original active borrower fraction."
        aliases: [ "original active borrower fraction" ]

      CurrentActiveBorrowerFraction:
        type: string
        description: "Current active borrower fraction."
        aliases: [ "current active borrower fraction" ]

      MethodologyType:
        type: string
        description: "Methodology type."
        aliases: [ "methodology type" ]

      MappingLevel:
        type: string
        description: "Mapping level."
        aliases: [ "mapping level" ]

      CurrentUPB:
        type: float
        description: "Current upb."
        aliases: [ "current upb" ]

      PricingSpreadAmount:
        type: float
        description: "Pricing spread amount."
        aliases: [ "amt", "value", "amount", "pricing spread amt", "pricing spread amount" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Count instruments by portfolio for a given run/date using PVR00300"
      - "Show key metrics grouped by portfolio or instrument from PVR00300"
      - "Filter by scenario/date fields and summarize results from PVR00300"

  pvr00400:
    file_patterns: [ "*PVR00400*.nzf", "*pvr00400*.nzf", "PVR00400.nzf", "PVR00400_synthetic_1000.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Instrument master attributes within a portfolio context (e.g., CUSIP, deal, dates, balances).
      Use this table for instrument-level rollups and portfolio composition analysis.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR00400"
      - "portfolio valuation"
      - "valuation results"
      - "pvr"
      - "instrument master"
      - "portfolio composition"
      - "instrument attributes"

    primary_key: [ "InstrumentID", "PortfolioID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "balances"
      - "instruments"
      - "portfolio"
      - "valuation"

    columns:
      InstrumentID:
        type: string
        description: "Instrument id."
        aliases: [ "pool", "cusip", "security", "instrument", "instrument id" ]

      PortfolioID:
        type: string
        description: "Portfolio id."
        aliases: [ "Portfolio", "Portfolio Id", "Portfolio Identifier" ]

      CUSIP:
        type: string
        description: "Cusip."
        aliases: [ "cusip" ]

      DealName:
        type: string
        description: "Deal name."
        aliases: [ "deal name" ]

      IssueDate:
        type: date
        description: "Issue date."
        aliases: [ "date", "issue date" ]

      MaturityDate:
        type: date
        description: "Maturity date."
        aliases: [ "date", "maturity date" ]

      CurrentUPBAmt:
        type: float
        description: "Current upbamt."
        aliases: [ "UPB", "Total UPB", "Current UPB", "Unpaid Principal Balance", "Current Unpaid Principal Balance", "Outstanding Principal" ]

      OriginalAmount:
        type: float
        description: "Original amount."
        aliases: [ "amt", "value", "amount", "original amt", "original amount" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Count instruments by portfolio for a given run/date using PVR00400"
      - "Show key metrics grouped by portfolio or instrument from PVR00400"
      - "Filter by scenario/date fields and summarize results from PVR00400"

  pvr00500:
    file_patterns: [ "*PVR00500*.nzf", "PVR00500.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Instrument payment terms and structure settings (caps/floors, index, reset, schedule, conventions).
      Use this table to analyze payment structure features and contractual terms.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR00500"
      - "portfolio valuation"
      - "valuation results"
      - "pvr"
      - "interest rates"
      - "rates"
      - "payment terms"
      - "coupon"
      - "pricing"
      - "oas"
      - "price"
      - "contract terms"

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "payment-structure"
      - "portfolio"
      - "pricing"
      - "rates"
      - "terms"
      - "valuation"

    columns:
      InstrumentID:
        type: string
        description: "Instrument id."
        aliases: [ "pool", "cusip", "security", "instrument", "instrument id" ]

      PaymentStructureID:
        type: string
        description: "Payment structure id."
        aliases: [ "ps id", "structure id", "payment structure", "payment structure id" ]

      SubsqntPayRecastMonth:
        type: int
        description: "Subsqnt pay recast month."
        aliases: [ "subsqnt pay recast month" ]

      PaymentTypeCode:
        type: string
        description: "Payment type code."
        aliases: [ "code", "payment type", "payment type code" ]

      LifeCapPTCpnRtExclGfee:
        type: string
        description: "Life cap ptcpn rt excl gfee."
        aliases: [ "life cap ptcpn rt excl gfee" ]

      LifeFlrPTCpnRtExclGfee:
        type: string
        description: "Life flr ptcpn rt excl gfee."
        aliases: [ "life flr ptcpn rt excl gfee" ]

      SubsqntPayAdjFreqMonth:
        type: int
        description: "Subsqnt pay adj freq month."
        aliases: [ "subsqnt pay adj freq month" ]

      InstrumentCouponTypeCode:
        type: float
        description: "Instrument coupon type code."
        aliases: [ "code", "instrument coupon type", "instrument coupon type code" ]

      PassThruCpnRateInclGFee:
        type: float
        description: "Pass thru cpn rate incl gfee."
        aliases: [ "pass thru cpn rate incl gfee" ]

      PassThroughCouponRate:
        type: float
        description: "Pass through coupon rate."
        aliases: [ "pass through coupon rate" ]

      InitialPaymentRecastMonth:
        type: int
        description: "Initial payment recast month."
        aliases: [ "initial payment recast month" ]

      PaymentHistory:
        type: string
        description: "Payment history."
        aliases: [ "payment history" ]

      PaymentFrequencyTypeCode:
        type: string
        description: "Payment frequency type code."
        aliases: [ "code", "payment frequency type", "payment frequency type code" ]

      PaymentDelayDays:
        type: int
        description: "Payment delay days."
        aliases: [ "payment delay days" ]

      PaymentCapRate:
        type: float
        description: "Payment cap rate."
        aliases: [ "payment cap rate" ]

      AmortizationTerm:
        type: int
        description: "Amortization term."
        aliases: [ "amortization term" ]

      AmortizationTypeCode:
        type: string
        description: "Amortization type code."
        aliases: [ "code", "amortization type", "amortization type code" ]

      DayCountCode:
        type: int
        description: "Day count code."
        aliases: [ "code", "day count", "day count code" ]

      FinalPaymentDate:
        type: date
        description: "Final payment date."
        aliases: [ "date", "final payment date" ]

      GrossMargin:
        type: float
        description: "Gross margin."
        aliases: [ "gross margin" ]

      ARMIndexCode:
        type: string
        description: "Armindex code."
        aliases: [ "code", "armindex", "armindex code" ]

      ARMIndexDescription:
        type: string
        description: "Armindex description."
        aliases: [ "armindex description" ]

      ARMIndexSource:
        type: string
        description: "Armindex source."
        aliases: [ "armindex source" ]

      InitialPaymentAdjMonth:
        type: int
        description: "Initial payment adj month."
        aliases: [ "initial payment adj month" ]

      InitialRateChangeCapRate:
        type: float
        description: "Initial rate change cap rate."
        aliases: [ "initial rate change cap rate" ]

      InitialRateResetPeriod:
        type: float
        description: "Initial rate reset period."
        aliases: [ "initial rate reset period" ]

      LifeCapCouponRate:
        type: float
        description: "Life cap coupon rate."
        aliases: [ "life cap coupon rate" ]

      LifeFloorCouponRate:
        type: float
        description: "Life floor coupon rate."
        aliases: [ "life floor coupon rate" ]

      LookBackPeriod:
        type: string
        description: "Look back period."
        aliases: [ "look back period" ]

      NetMargin:
        type: float
        description: "Net margin."
        aliases: [ "net margin" ]

      NotionalBalanceAmount:
        type: float
        description: "Notional balance amount."
        aliases: [ "amt", "value", "amount", "notional balance amt", "notional balance amount" ]

      NotionalBalanceCode:
        type: float
        description: "Notional balance code."
        aliases: [ "code", "notional balance", "notional balance code" ]

      PayDay:
        type: string
        description: "Pay day."
        aliases: [ "pay day" ]

      SubsqntRtResetFreqMonth:
        type: int
        description: "Subsqnt rt reset freq month."
        aliases: [ "subsqnt rt reset freq month" ]

      SubsqntRateChangeCapRate:
        type: float
        description: "Subsqnt rate change cap rate."
        aliases: [ "subsqnt rate change cap rate" ]

      TradeAmount:
        type: float
        description: "Trade amount."
        aliases: [ "amt", "value", "amount", "trade amt", "trade amount" ]

      ConvertibleIndicator:
        type: bool
        description: "Convertible indicator."
        aliases: [ "convertible indicator" ]

      ConversionDate:
        type: date
        description: "Conversion date."
        aliases: [ "date", "conversion date" ]

      FirstRateResetDate:
        type: date
        description: "First rate reset date."
        aliases: [ "date", "first rate reset date" ]

      FirstPaymentDate:
        type: date
        description: "First payment date."
        aliases: [ "date", "first payment date" ]

      IndexType:
        type: string
        description: "Index type."
        aliases: [ "index type" ]

      IndexTerm:
        type: int
        description: "Index term."
        aliases: [ "index term" ]

      InterestCurrencyCode:
        type: string
        description: "Interest currency code."
        aliases: [ "code", "interest currency", "interest currency code" ]

      InterestAdjConventioLifeCapIndicator:
        type: bool
        description: "Interest adj conventio life cap indicator."
        aliases: [ "interest adj conventio life cap indicator" ]

      LiabLifeCapCouponRate:
        type: float
        description: "Liab life cap coupon rate."
        aliases: [ "liab life cap coupon rate" ]

      LiabLifeFloorCouponRate:
        type: float
        description: "Liab life floor coupon rate."
        aliases: [ "liab life floor coupon rate" ]

      NetProceeds:
        type: string
        description: "Net proceeds."
        aliases: [ "net proceeds" ]

      PaymentStructureTypeCode:
        type: string
        description: "Payment structure type code."
        aliases: [ "code", "type code", "payment type", "structure type", "payment structure type", "payment structure type code" ]

      PaymentCalendarCode:
        type: string
        description: "Payment calendar code."
        aliases: [ "code", "payment calendar", "payment calendar code" ]

      PaymentRollConvention:
        type: string
        description: "Payment roll convention."
        aliases: [ "payment roll convention" ]

      PaymentMethodCode:
        type: string
        description: "Payment method code."
        aliases: [ "code", "payment method", "payment method code" ]

      PrincipalCurrencyCode:
        type: string
        description: "Principal currency code."
        aliases: [ "code", "principal currency", "principal currency code" ]

      RangeAccrualProvisionInd:
        type: bool
        description: "Range accrual provision ind."
        aliases: [ "range accrual provision ind" ]

      RangeNoteSuspensionPeriod:
        type: string
        description: "Range note suspension period."
        aliases: [ "range note suspension period" ]

      RangeNoteObsPeriod:
        type: string
        description: "Range note obs period."
        aliases: [ "range note obs period" ]

      RangeNoteObsCalendarCode:
        type: string
        description: "Range note obs calendar code."
        aliases: [ "code", "range note obs calendar", "range note obs calendar code" ]

      ResetCalendarCode:
        type: string
        description: "Reset calendar code."
        aliases: [ "code", "reset calendar", "reset calendar code" ]

      ResetRollConventionCode:
        type: string
        description: "Reset roll convention code."
        aliases: [ "code", "reset roll convention", "reset roll convention code" ]

      ResetMethodCode:
        type: string
        description: "Reset method code."
        aliases: [ "code", "reset method", "reset method code" ]

      Coefficient:
        type: string
        description: "Coefficient."
        aliases: [ "coefficient" ]

      BLMAmortizationTerm:
        type: int
        description: "Blmamortization term."
        aliases: [ "blmamortization term" ]

      BLMAmortizationTypeCode:
        type: string
        description: "Blmamortization type code."
        aliases: [ "code", "blmamortization type", "blmamortization type code" ]

      BLMPassThroughCouponRate:
        type: float
        description: "Blmpass through coupon rate."
        aliases: [ "blmpass through coupon rate" ]

      LoanServicingFeeRate:
        type: float
        description: "Loan servicing fee rate."
        aliases: [ "loan servicing fee rate" ]

      BLMBorrowerNoteRate:
        type: float
        description: "Blmborrower note rate."
        aliases: [ "blmborrower note rate" ]

      PostModBorrowerNoteRate:
        type: float
        description: "Post mod borrower note rate."
        aliases: [ "post mod borrower note rate" ]

      BestExCouponRate:
        type: float
        description: "Best ex coupon rate."
        aliases: [ "best ex coupon rate" ]

      BuyUpPrice:
        type: float
        description: "Buy up price."
        aliases: [ "buy up price" ]

      BuyDownPrice:
        type: float
        description: "Buy down price."
        aliases: [ "buy down price" ]

      BuyUpBps:
        type: float
        description: "Buy up bps."
        aliases: [ "buy up bps" ]

      BuyDownBps:
        type: string
        description: "Buy down bps."
        aliases: [ "buy down bps" ]

      RepositionTradePrice:
        type: float
        description: "Reposition trade price."
        aliases: [ "reposition trade price" ]

      FrontStubEndDate:
        type: date
        description: "Front stub end date."
        aliases: [ "date", "front stub end date" ]

      BackStubStartDate:
        type: date
        description: "Back stub start date."
        aliases: [ "date", "back stub start date" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Count instruments by portfolio for a given run/date using PVR00500"
      - "Show key metrics grouped by portfolio or instrument from PVR00500"
      - "Filter by scenario/date fields and summarize results from PVR00500"

  pvr00600:
    file_patterns: [ "*PVR00600*.nzf", "PVR00600.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Instrument-level analytics outputs for a valuation run (e.g., OAS, price, duration, WAL, CPR).
      Use this table to analyze pricing and risk measures by instrument and portfolio.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR00600"
      - "portfolio valuation"
      - "valuation results"
      - "pvr"
      - "pricing"
      - "oas"
      - "price"
      - "analytics"
      - "risk measures"
      - "valuation analytics"

    primary_key: [ "DmrRunID", "PortfolioID", "InstrumentID", "RunID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "analytics"
      - "portfolio"
      - "pricing"
      - "risk"
      - "valuation"

    columns:
      DmrRunID:
        type: string
        description: "Dmr run id."
        aliases: [ "run id", "dmr run", "batch id", "dmr run id" ]

      PortfolioID:
        type: string
        description: "Portfolio id."
        aliases: [ "book", "account", "portfolio", "portfolio id" ]

      InstrumentID:
        type: string
        description: "Instrument id."
        aliases: [ "pool", "cusip", "security", "instrument", "instrument id" ]

      RunID:
        type: string
        description: "Run id."
        aliases: [ "run", "run id" ]

      Oas:
        type: float
        description: "Oas."
        aliases: [ "oas" ]

      Price:
        type: float
        description: "Price."
        aliases: [ "price" ]

      Duration:
        type: float
        description: "Duration."
        aliases: [ "duration" ]

      WeightedAvgLife:
        type: float
        description: "Weighted avg life."
        aliases: [ "weighted avg life" ]

      CPR1Year:
        type: float
        description: "Cpr1 year."
        aliases: [ "cpr1 year" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Count instruments by portfolio for a given run/date using PVR00600"
      - "Show key metrics grouped by portfolio or instrument from PVR00600"
      - "Filter by scenario/date fields and summarize results from PVR00600"

  pvr00900:
    file_patterns: [ "*PVR00900*.nzf", "PVR00900.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Interest rate curve points by scenario/index/maturity.
      Use this table to analyze rate curves and scenario assumptions as of a given date.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR00900"
      - "portfolio valuation"
      - "valuation results"
      - "pvr"
      - "scenario"
      - "scenarios"
      - "interest rates"
      - "rates"
      - "rate curves"
      - "yield curve"
      - "curve points"

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "curves"
      - "portfolio"
      - "rates"
      - "scenarios"
      - "valuation"

    columns:
      InterestRateDate:
        type: date
        description: "Interest rate date."
        aliases: [ "date", "interest rate date" ]

      Description:
        type: string
        description: "Description."
        aliases: [ "description" ]

      Type:
        type: string
        description: "Type."
        aliases: [ "type" ]

      InterestRateScenario:
        type: float
        description: "Interest rate scenario."
        aliases: [ "ir scenario", "rate scenario", "interest rate scenario" ]

      IndexName:
        type: string
        description: "Index name."
        aliases: [ "index name" ]

      Maturity:
        type: string
        description: "Maturity."
        aliases: [ "maturity" ]

      Rate:
        type: float
        description: "Rate."
        aliases: [ "rate" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Count instruments by portfolio for a given run/date using PVR00900"
      - "Show key metrics grouped by portfolio or instrument from PVR00900"
      - "Filter by scenario/date fields and summarize results from PVR00900"

  pvr01000:
    file_patterns: [ "*PVR01000*.nzf", "PVR01000.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Portfolio list for each valuation run (run-to-portfolio mapping).
      Use this table to identify which portfolios were included in each DMR run.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR01000"
      - "portfolio valuation"
      - "valuation results"
      - "pvr"
      - "portfolio list"
      - "run portfolios"

    primary_key: [ "PortfolioID", "DmrRunID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "portfolio"
      - "run-metadata"
      - "valuation"

    columns:
      PortfolioID:
        type: string
        description: "Portfolio id."
        aliases: [ "Portfolio", "Portfolio Id", "Portfolio Identifier" ]

      DmrRunID:
        type: string
        description: "Dmr run id."
        aliases: [ "run id", "dmr run", "batch id", "dmr run id" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Count instruments by portfolio for a given run/date using PVR01000"
      - "Show key metrics grouped by portfolio or instrument from PVR01000"
      - "Filter by scenario/date fields and summarize results from PVR01000"

  pvr01100:
    file_patterns: [ "*PVR01100*.nzf", "PVR01100.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Instrument characteristics and loan rollup attributes by run/portfolio (e.g., unpaid balance, LTV, WAC, WAM).
      Use this table for characteristic-based segmentation and credit/rate sensitivity analysis.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR01100"
      - "portfolio valuation"
      - "valuation results"
      - "pvr"
      - "interest rates"
      - "rates"
      - "characteristics"
      - "loan attributes"
      - "instrument characteristics"

    primary_key: [ "DMRRunID", "InstrumentID", "PortfolioID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "balances"
      - "characteristics"
      - "loan-characteristics"
      - "portfolio"
      - "rates"
      - "valuation"

    columns:
      DMRRunID:
        type: string
        description: "Dmrrun id."
        aliases: [ "dmrrun", "run id", "batch id", "dmrrun id", "dmr run id" ]

      InstrumentID:
        type: string
        description: "Instrument id."
        aliases: [ "pool", "cusip", "security", "instrument", "instrument id" ]

      PortfolioID:
        type: string
        description: "Portfolio id."
        aliases: [ "book", "account", "portfolio", "portfolio id" ]

      UnpaidBalance:
        type: float
        description: "Unpaid balance."
        aliases: [ "unpaid balance" ]

      Ltv:
        type: float
        description: "Ltv."
        aliases: [ "ltv" ]

      OriginalWacRate:
        type: float
        description: "Original wac rate."
        aliases: [ "original wac rate" ]

      WamMth:
        type: int
        description: "Wam mth."
        aliases: [ "wam mth" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Count instruments by portfolio for a given run/date using PVR01100"
      - "Show key metrics grouped by portfolio or instrument from PVR01100"
      - "Filter by scenario/date fields and summarize results from PVR01100"

  pvr01200:
    file_patterns: [ "*PVR01200*.nzf", "PVR01200.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Detailed payment schedule / reset rules and index parameters by instrument and payment structure.
      Use this table to analyze coupon resets, compounding, schedule conventions, and cashflow setup.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR01200"
      - "portfolio valuation"
      - "valuation results"
      - "pvr"
      - "interest rates"
      - "rates"
      - "payment terms"
      - "coupon"
      - "payment schedule"
      - "reset rules"
      - "cashflow setup"

    primary_key: [ "DMRRunID", "InstrumentID", "PaymentStructureID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "payment-structure"
      - "portfolio"
      - "rates"
      - "schedule"
      - "valuation"

    columns:
      DMRRunID:
        type: string
        description: "Dmrrun id."
        aliases: [ "dmrrun", "run id", "batch id", "dmrrun id", "dmr run id" ]

      InstrumentID:
        type: string
        description: "Instrument id."
        aliases: [ "pool", "cusip", "security", "instrument", "instrument id" ]

      PaymentStructureID:
        type: string
        description: "Payment structure id."
        aliases: [ "ps id", "structure id", "payment structure", "payment structure id" ]

      PaymentStructureTypeCode:
        type: string
        description: "Payment structure type code."
        aliases: [ "code", "type code", "payment type", "structure type", "payment structure type", "payment structure type code" ]

      VnType:
        type: string
        description: "Vn type."
        aliases: [ "vn type" ]

      AccrualsAnniversaryDay:
        type: string
        description: "Accruals anniversary day."
        aliases: [ "accruals anniversary day" ]

      AccrualsBusinessCenter:
        type: string
        description: "Accruals business center."
        aliases: [ "accruals business center" ]

      AccrualsFrequencyTerm:
        type: int
        description: "Accruals frequency term."
        aliases: [ "accruals frequency term" ]

      AccrualsFrequencyTermUnit:
        type: int
        description: "Accruals frequency term unit."
        aliases: [ "accruals frequency term unit" ]

      AccrualsRollConvention:
        type: string
        description: "Accruals roll convention."
        aliases: [ "accruals roll convention" ]

      AllowMaturityDateAdjustment:
        type: date
        description: "Allow maturity date adjustment."
        aliases: [ "date", "allow maturity date adjustment" ]

      AmortizationTerm:
        type: int
        description: "Amortization term."
        aliases: [ "amortization term" ]

      Balance:
        type: float
        description: "Balance."
        aliases: [ "balance" ]

      CapRate:
        type: float
        description: "Cap rate."
        aliases: [ "cap rate" ]

      Coupon:
        type: float
        description: "Coupon."
        aliases: [ "coupon" ]

      DayCountCode:
        type: int
        description: "Day count code."
        aliases: [ "code", "day count", "day count code" ]

      EffectiveDate:
        type: date
        description: "Effective date."
        aliases: [ "date", "effective date" ]

      ExpectedAverageRate:
        type: float
        description: "Expected average rate."
        aliases: [ "expected average rate" ]

      FirstAdjustment:
        type: string
        description: "First adjustment."
        aliases: [ "first adjustment" ]

      FirstAdjustmentSpread:
        type: float
        description: "First adjustment spread."
        aliases: [ "first adjustment spread" ]

      FirstPaymentDate:
        type: date
        description: "First payment date."
        aliases: [ "date", "first payment date" ]

      FirstResetDate:
        type: date
        description: "First reset date."
        aliases: [ "date", "first reset date" ]

      FloorRate:
        type: float
        description: "Floor rate."
        aliases: [ "floor rate" ]

      Index:
        type: string
        description: "Index."
        aliases: [ "index" ]

      IndexCompoundingTerm:
        type: int
        description: "Index compounding term."
        aliases: [ "index compounding term" ]

      IndexCompoundingTermUnit:
        type: int
        description: "Index compounding term unit."
        aliases: [ "index compounding term unit" ]

      IndexMaturityTerm:
        type: int
        description: "Index maturity term."
        aliases: [ "index maturity term" ]

      IndexMaturityTermUnit:
        type: int
        description: "Index maturity term unit."
        aliases: [ "index maturity term unit" ]

      IndexMultiplier:
        type: string
        description: "Index multiplier."
        aliases: [ "index multiplier" ]

      IndexReferenceCurve:
        type: string
        description: "Index reference curve."
        aliases: [ "index reference curve" ]

      IndexSpreadOverCurve:
        type: float
        description: "Index spread over curve."
        aliases: [ "index spread over curve" ]

      InitialTeaserPeriod:
        type: string
        description: "Initial teaser period."
        aliases: [ "initial teaser period" ]

      InvestorDelay:
        type: string
        description: "Investor delay."
        aliases: [ "investor delay" ]

      InvestorPercentage:
        type: float
        description: "Investor percentage."
        aliases: [ "pct", "percent", "investor pctage", "investor percentage" ]

      MarginSpread:
        type: float
        description: "Margin spread."
        aliases: [ "margin spread" ]

      MaturityDate:
        type: date
        description: "Maturity date."
        aliases: [ "date", "maturity date" ]

      PaymentCap:
        type: string
        description: "Payment cap."
        aliases: [ "payment cap" ]

      PaymentDay:
        type: string
        description: "Payment day."
        aliases: [ "payment day" ]

      PaymentFirstAdjustment:
        type: string
        description: "Payment first adjustment."
        aliases: [ "payment first adjustment" ]

      PaymentPlan:
        type: string
        description: "Payment plan."
        aliases: [ "payment plan" ]

      PaymentsDayCount:
        type: int
        description: "Payments day count."
        aliases: [ "payments day count" ]

      PaymentsFrequencyTerm:
        type: int
        description: "Payments frequency term."
        aliases: [ "payments frequency term" ]

      PaymentsOffset:
        type: string
        description: "Payments offset."
        aliases: [ "payments offset" ]

      PaymentsOffsetAnnDay:
        type: string
        description: "Payments offset ann day."
        aliases: [ "payments offset ann day" ]

      PaymentsOffsetBusCenter:
        type: string
        description: "Payments offset bus center."
        aliases: [ "payments offset bus center" ]

      PaymentsOffsetRollConv:
        type: string
        description: "Payments offset roll conv."
        aliases: [ "payments offset roll conv" ]

      PaymentsOffsetUnit:
        type: string
        description: "Payments offset unit."
        aliases: [ "payments offset unit" ]

      PaymentsRelativeTo:
        type: string
        description: "Payments relative to."
        aliases: [ "payments relative to" ]

      PaymentsType:
        type: string
        description: "Payments type."
        aliases: [ "payments type" ]

      PaymentSubsequentAdjustment:
        type: string
        description: "Payment subsequent adjustment."
        aliases: [ "payment subsequent adjustment" ]

      RecastFirstTerm:
        type: int
        description: "Recast first term."
        aliases: [ "recast first term" ]

      RecastSubsequentTerm:
        type: int
        description: "Recast subsequent term."
        aliases: [ "recast subsequent term" ]

      ResetsFixingOffset:
        type: string
        description: "Resets fixing offset."
        aliases: [ "resets fixing offset" ]

      ResetsFixingOffsetUnit:
        type: string
        description: "Resets fixing offset unit."
        aliases: [ "resets fixing offset unit" ]

      ResetsFrequencyBusCenter:
        type: string
        description: "Resets frequency bus center."
        aliases: [ "resets frequency bus center" ]

      ResetsFrequencyRollConv:
        type: string
        description: "Resets frequency roll conv."
        aliases: [ "resets frequency roll conv" ]

      ResetsFrequencyTerm:
        type: int
        description: "Resets frequency term."
        aliases: [ "resets frequency term" ]

      ResetsFrequencyTermAnnDay:
        type: int
        description: "Resets frequency term ann day."
        aliases: [ "resets frequency term ann day" ]

      ResetsFrequencyTermUnit:
        type: int
        description: "Resets frequency term unit."
        aliases: [ "resets frequency term unit" ]

      ResetsHistoricalRate:
        type: float
        description: "Resets historical rate."
        aliases: [ "resets historical rate" ]

      ResetsHistoryRef:
        type: string
        description: "Resets history ref."
        aliases: [ "resets history ref" ]

      ResetsRelativeTo:
        type: string
        description: "Resets relative to."
        aliases: [ "resets relative to" ]

      DoCompounding:
        type: string
        description: "Do compounding."
        aliases: [ "do compounding" ]

      SubsequentAdjustmentFreq:
        type: string
        description: "Subsequent adjustment freq."
        aliases: [ "subsequent adjustment freq" ]

      SubsequentAdjustmentSpread:
        type: float
        description: "Subsequent adjustment spread."
        aliases: [ "subsequent adjustment spread" ]

      UseExactSchedule:
        type: string
        description: "Use exact schedule."
        aliases: [ "use exact schedule" ]

      DoCompoundingNonBusinessDays:
        type: int
        description: "Do compounding non business days."
        aliases: [ "do compounding non business days" ]

      FrontStubEndDate:
        type: date
        description: "Front stub end date."
        aliases: [ "date", "front stub end date" ]

      BackStubStartDate:
        type: date
        description: "Back stub start date."
        aliases: [ "date", "back stub start date" ]

      IndexCurve:
        type: string
        description: "Index curve."
        aliases: [ "index curve" ]

      PortfolioID:
        type: string
        description: "Portfolio id."
        aliases: [ "book", "account", "portfolio", "portfolio id" ]

      PortfolioDate:
        type: date
        description: "Portfolio date."
        aliases: [ "date", "portfolio date", "portfolio as of date" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Count instruments by portfolio for a given run/date using PVR01200"
      - "Show key metrics grouped by portfolio or instrument from PVR01200"
      - "Filter by scenario/date fields and summarize results from PVR01200"

  pvr01300:
    file_patterns: [ "*PVR01300*.nzf", "PVR01300.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Option exercise information by instrument and as-of portfolio date.
      Use this table to analyze option exercise dates/prices for instruments.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR01300"
      - "portfolio valuation"
      - "valuation results"
      - "pvr"
      - "pricing"
      - "oas"
      - "price"
      - "option exercise"
      - "call option"
      - "option price"

    primary_key: [ "DMRRunID", "InstrumentID", "PortfolioID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "as-of"
      - "options"
      - "portfolio"
      - "pricing"
      - "valuation"

    columns:
      DMRRunID:
        type: string
        description: "Dmrrun id."
        aliases: [ "dmrrun", "run id", "batch id", "dmrrun id", "dmr run id" ]

      InstrumentID:
        type: string
        description: "Instrument id."
        aliases: [ "pool", "cusip", "security", "instrument", "instrument id" ]

      OptionExerciseDate:
        type: date
        description: "Option exercise date."
        aliases: [ "date", "option exercise date" ]

      OptionExercisePrice:
        type: float
        description: "Option exercise price."
        aliases: [ "option exercise price" ]

      PortfolioID:
        type: string
        description: "Portfolio id."
        aliases: [ "book", "account", "portfolio", "portfolio id" ]

      PortfolioDate:
        type: date
        description: "Portfolio date."
        aliases: [ "date", "portfolio date", "portfolio as of date" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Count instruments by portfolio for a given run/date using PVR01300"
      - "Show key metrics grouped by portfolio or instrument from PVR01300"
      - "Filter by scenario/date fields and summarize results from PVR01300"

  pvr01400:
    file_patterns: [ "*PVR01400*.nzf", "PVR01400.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Step-rate coupon reset details by instrument/payment structure and as-of portfolio date.
      Use this table to analyze step-rate reset dates and reset rates.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR01400"
      - "portfolio valuation"
      - "valuation results"
      - "pvr"
      - "interest rates"
      - "rates"
      - "payment terms"
      - "coupon"
      - "step rate"
      - "coupon reset"
      - "reset rate"

    primary_key: [ "DMRRunID", "InstrumentID", "PaymentStructureID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "payment-structure"
      - "portfolio"
      - "rates"
      - "step-rate"
      - "valuation"

    columns:
      DMRRunID:
        type: string
        description: "Dmrrun id."
        aliases: [ "dmrrun", "run id", "batch id", "dmrrun id", "dmr run id" ]

      InstrumentID:
        type: string
        description: "Instrument id."
        aliases: [ "pool", "cusip", "security", "instrument", "instrument id" ]

      PaymentStructureID:
        type: string
        description: "Payment structure id."
        aliases: [ "ps id", "structure id", "payment structure", "payment structure id" ]

      PaymentStructureTypeCode:
        type: string
        description: "Payment structure type code."
        aliases: [ "code", "type code", "payment type", "structure type", "payment structure type", "payment structure type code" ]

      StepRateCouponResetDate:
        type: date
        description: "Step rate coupon reset date."
        aliases: [ "date", "step rate coupon reset date" ]

      StepRateCouponResetRate:
        type: float
        description: "Step rate coupon reset rate."
        aliases: [ "step rate coupon reset rate" ]

      PortfolioID:
        type: string
        description: "Portfolio id."
        aliases: [ "book", "account", "portfolio", "portfolio id" ]

      PortfolioDate:
        type: date
        description: "Portfolio date."
        aliases: [ "date", "portfolio date", "portfolio as of date" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Count instruments by portfolio for a given run/date using PVR01400"
      - "Show key metrics grouped by portfolio or instrument from PVR01400"
      - "Filter by scenario/date fields and summarize results from PVR01400"

  pvr01500:
    file_patterns: [ "*PVR01500*.nzf", "PVR01500.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      PVR01500 dataset.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR01500"
      - "payment structure"
      - "payment schedule"
      - "variable rate history"
      - "rate reset history"
      - "historical coupon"
      - "coupon history"

    primary_key: [ "DMRRunID", "InstrumentID", "PaymentStructureID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "payment-structure"
      - "portfolio"
      - "rates"
      - "valuation"

    columns:
      DMRRunID:
        type: string
        description: "DMR run identifier (batch/run context)."
        aliases: [ "run id", "dmr run", "batch id", "as of run" ]

      InstrumentID:
        type: string
        description: "Instrument identifier."
        aliases: [ "instrument", "security", "pool", "cusip", "id" ]

      PaymentStructureID:
        type: string
        description: "Unique identifier for a payment structure tied to an instrument."
        aliases: [ "payment structure id", "structure id", "ps id" ]

      PaymentStructureTypeCode:
        type: string
        description: "Code representing the payment structure type."
        aliases: [ "payment type", "structure type", "payment structure type", "type code" ]

      HistoricalVarRateResetDate:
        type: date
        description: "Date when the variable rate was reset (historical)."
        aliases: [ "reset date", "rate reset date", "var reset", "reprice date" ]

      HistoricalVarRateCouponPercent:
        type: float
        description: "Coupon percent after the historical variable-rate reset."
        aliases: [ "coupon", "coupon percent", "interest rate", "rate", "var coupon", "reset coupon" ]

      PortfolioID:
        type: string
        description: "Portfolio identifier."
        aliases: [ "portfolio", "portfolio id", "account", "book" ]

      PortfolioDate:
        type: date
        description: "As-of date for the portfolio snapshot."
        aliases: [ "as of date", "portfolio asof", "snapshot date", "report date" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "UPB or instrument count by payment structure type for a given PortfolioDate"
      - "List instruments with variable-rate reset date in a given month"
      - "Average coupon percent by portfolio and payment structure type"

  pvr01600:
    file_patterns: [ "*PVR01600*.nzf", "PVR01600.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Principal/notional paydown events by instrument/payment structure and as-of portfolio date.
      Use this table to analyze scheduled or event-based principal paydowns.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR01600"
      - "portfolio valuation"
      - "valuation results"
      - "pvr"
      - "payment terms"
      - "coupon"
      - "principal paydown"
      - "notional paydown"

    primary_key: [ "DMRRunID", "InstrumentID", "PaymentStructureID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "cashflows"
      - "paydown"
      - "payment-structure"
      - "portfolio"
      - "valuation"

    columns:
      DMRRunID:
        type: string
        description: "Dmrrun id."
        aliases: [ "dmrrun", "run id", "batch id", "dmrrun id", "dmr run id" ]

      InstrumentID:
        type: string
        description: "Instrument id."
        aliases: [ "pool", "cusip", "security", "instrument", "instrument id" ]

      PaymentStructureID:
        type: string
        description: "Payment structure id."
        aliases: [ "ps id", "structure id", "payment structure", "payment structure id" ]

      PaymentStructureTypeCode:
        type: string
        description: "Payment structure type code."
        aliases: [ "code", "type code", "payment type", "structure type", "payment structure type", "payment structure type code" ]

      PrinNtnlPaydownDate:
        type: date
        description: "Prin ntnl paydown date."
        aliases: [ "date", "prin ntnl paydown date" ]

      PrinNtnlPaydownAmount:
        type: float
        description: "Prin ntnl paydown amount."
        # Add short business phrases so NL "principal paydowns" maps reliably to this column.
        aliases: [ "principal paydown", "principal paydowns", "notional paydown", "paydown amount", "principal paydown amount", "amt", "value", "amount", "prin ntnl paydown amt", "prin ntnl paydown amount" ]

      PortfolioID:
        type: string
        description: "Portfolio id."
        aliases: [ "book", "account", "portfolio", "portfolio id" ]

      PortfolioDate:
        type: date
        description: "Portfolio date."
        aliases: [ "date", "portfolio date", "portfolio as of date" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Count instruments by portfolio for a given run/date using PVR01600"
      - "Show key metrics grouped by portfolio or instrument from PVR01600"
      - "Filter by scenario/date fields and summarize results from PVR01600"

  pvr01700:
    file_patterns: [ "*PVR01700*.nzf", "PVR01700.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Range note bounds and observation rules by instrument/payment structure and as-of portfolio date.
      Use this table to analyze range note parameters (bounds, compare rules, reference index).

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR01700"
      - "portfolio valuation"
      - "valuation results"
      - "pvr"
      - "interest rates"
      - "rates"
      - "payment terms"
      - "coupon"
      - "range note"
      - "range bounds"
      - "coupon bounds"

    primary_key: [ "DMRRunID", "InstrumentID", "PaymentStructureID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "payment-structure"
      - "portfolio"
      - "range-note"
      - "rates"
      - "valuation"

    columns:
      DMRRunID:
        type: string
        description: "Dmrrun id."
        aliases: [ "dmrrun", "run id", "batch id", "dmrrun id", "dmr run id" ]

      InstrumentID:
        type: string
        description: "Instrument id."
        aliases: [ "pool", "cusip", "security", "instrument", "instrument id" ]

      PaymentStructureID:
        type: string
        description: "Payment structure id."
        aliases: [ "ps id", "structure id", "payment structure", "payment structure id" ]

      PaymentStructureTypeCode:
        type: string
        description: "Payment structure type code."
        aliases: [ "code", "type code", "payment type", "structure type", "payment structure type", "payment structure type code" ]

      RangeNotePeriodBeginDate:
        type: date
        description: "Range note period begin date."
        aliases: [ "date", "range note period begin date" ]

      RangeNotePeriodEndDate:
        type: date
        description: "Range note period end date."
        aliases: [ "date", "range note period end date" ]

      RangeNoteLowerBoundRate:
        type: float
        description: "Range note lower bound rate."
        aliases: [ "range note lower bound rate" ]

      RangeNoteLowerBoundCompareRule:
        type: string
        description: "Range note lower bound compare rule."
        aliases: [ "range note lower bound compare rule" ]

      RangeNoteUpperBoundRate:
        type: float
        description: "Range note upper bound rate."
        aliases: [ "range note upper bound rate" ]

      RangeNoteUpperBoundCompareRule:
        type: string
        description: "Range note upper bound compare rule."
        aliases: [ "range note upper bound compare rule" ]

      RangeNoteRefIndex:
        type: string
        description: "Range note ref index."
        aliases: [ "range note ref index" ]

      RangeNoteRefIndexSpreads:
        type: float
        description: "Range note ref index spreads."
        aliases: [ "range note ref index spreads" ]

      RangeNoteRefIndexMultipliers:
        type: string
        description: "Range note ref index multipliers."
        aliases: [ "range note ref index multipliers" ]

      PortfolioID:
        type: string
        description: "Portfolio id."
        aliases: [ "book", "account", "portfolio", "portfolio id" ]

      PortfolioDate:
        type: date
        description: "Portfolio date."
        aliases: [ "date", "portfolio date", "portfolio as of date" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Count instruments by portfolio for a given run/date using PVR01700"
      - "Show key metrics grouped by portfolio or instrument from PVR01700"
      - "Filter by scenario/date fields and summarize results from PVR01700"

  pvr01900:
    file_patterns: [ "*PVR01900*.nzf", "PVR01900.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Over-time premium payment events by instrument and as-of portfolio date.
      Use this table to analyze premium payment dates and amounts.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PVR01900"
      - "portfolio valuation"
      - "valuation results"
      - "pvr"
      - "payment terms"
      - "coupon"
      - "premium payments"
      - "overtime premium"

    primary_key: [ "DMRRunID", "InstrumentID", "PortfolioID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "cashflows"
      - "payment-structure"
      - "portfolio"
      - "premium"
      - "valuation"

    columns:
      DMRRunID:
        type: string
        description: "Dmrrun id."
        aliases: [ "dmrrun", "run id", "batch id", "dmrrun id", "dmr run id" ]

      InstrumentID:
        type: string
        description: "Instrument id."
        aliases: [ "pool", "cusip", "security", "instrument", "instrument id" ]

      OverTimePremiumPaymentDate:
        type: date
        description: "Over time premium payment date."
        aliases: [ "date", "over time premium payment date" ]

      OverTimePremiumPaymentAmount:
        type: float
        description: "Over time premium payment amount."
        # Add short business phrases so NL "premium payments" maps reliably to this column.
        aliases: [ "premium payment", "premium payments", "premium amount", "premium payment amount", "amt", "value", "amount", "over time premium payment amt", "over time premium payment amount" ]

      PortfolioID:
        type: string
        description: "Portfolio id."
        aliases: [ "book", "account", "portfolio", "portfolio id" ]

      PortfolioDate:
        type: date
        description: "Portfolio date."
        aliases: [ "date", "portfolio date", "portfolio as of date" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Count instruments by portfolio for a given run/date using PVR01900"
      - "Show key metrics grouped by portfolio or instrument from PVR01900"
      - "Filter by scenario/date fields and summarize results from PVR01900"

  krd00100:
    file_patterns: [ "*KRD00100*.nzf", "KRD00100.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Key Rate Duration (KRD) analytics by instrument/segment/scenario.
      Use this table to analyze risk bucket sensitivities across segments for a valuation load.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "KRD00100"
      - "key rate duration"
      - "krd"
      - "risk buckets"
      - "scenario"
      - "scenarios"
      - "krd analytics"
      - "duration buckets"

    primary_key: [ "ValuationLoadId", "InstrumentID", "ScenarioType", "SegmentId" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "duration"
      - "krd"
      - "rates"
      - "risk"
      - "scenarios"

    columns:
      ValuationLoadId:
        type: string
        description: "Valuation load id."
        aliases: [ "valuation load", "valuation load id" ]

      InstrumentID:
        type: string
        description: "Instrument id."
        aliases: [ "pool", "cusip", "security", "instrument", "instrument id" ]

      ScenarioType:
        type: string
        description: "Scenario type."
        aliases: [ "scenario type" ]

      SegmentId:
        type: string
        description: "Segment id."
        aliases: [ "segment", "segment id" ]

      SegmentName:
        type: string
        description: "Segment name."
        aliases: [ "segment name" ]

      AnalyticValue:
        type: float
        description: "Analytic value."
        aliases: [ "analytic value" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Sum analytic value by segment and scenario from KRD00100"
      - "Compare KRD sensitivities across segments for a scenario"
      - "Top instruments by absolute KRD analytic value"

  krd00200:
    file_patterns: [ "*KRD00200*.nzf", "KRD00200.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Key Rate Duration (KRD) analytics values by instrument, segment, and scenario for a valuation load.
      Use this table to analyze KRD analytic values across segments for risk reporting.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "KRD00200"
      - "key rate duration"
      - "krd"
      - "risk buckets"
      - "scenario"
      - "scenarios"
      - "krd analytics"
      - "risk segments"

    primary_key: [ "ValuationLoadId", "InstrumentID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "krd"
      - "rates"
      - "risk"
      - "scenarios"

    columns:
      ScenarioType:
        type: string
        description: "Scenario type."
        aliases: [ "scenario", "scenario type", "stress scenario" ]

      SegmentId:
        type: string
        description: "Segment id."
        aliases: [ "segment", "segment id" ]

      SegmentName:
        type: string
        description: "Segment name."
        aliases: [ "segment name" ]

      ValuationLoadId:
        type: string
        description: "Valuation load id."
        aliases: [ "valuation load", "valuation load id" ]

      AnalyticValue:
        type: string
        description: "Analytic value."
        aliases: [ "analytic value" ]

      InstrumentID:
        type: string
        description: "Instrument id."
        aliases: [ "pool", "cusip", "security", "instrument", "instrument id" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Sum analytic value by segment and scenario from KRD00200"
      - "Compare KRD sensitivities across segments for a scenario"
      - "Top instruments by absolute KRD analytic value"

  krd00300:
    file_patterns: [ "*KRD00300*.nzf", "KRD00300.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Scenario curve/bucket definition points (start/end) for KRD-style analyses.
      Use this table to interpret scenario bucket boundaries.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "KRD00300"
      - "key rate duration"
      - "krd"
      - "risk buckets"
      - "scenario"
      - "scenarios"
      - "bucket definition"
      - "scenario buckets"

    primary_key: [ "ScenarioType", "StartPoint", "EndPoint" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "krd"
      - "rates"
      - "risk"
      - "scenarios"

    columns:
      ScenarioType:
        type: string
        description: "Scenario type."
        aliases: [ "scenario", "scenario type", "stress scenario" ]

      StartPoint:
        type: string
        description: "Start point."
        aliases: [ "start point" ]

      EndPoint:
        type: string
        description: "End point."
        aliases: [ "end point" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "Sum analytic value by segment and scenario from KRD00300"
      - "Compare KRD sensitivities across segments for a scenario"
      - "Top instruments by absolute KRD analytic value"

  pnl00100:
    file_patterns: [ "*PNL00100*.nzf", "PNL00100.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      Portfolio type reference for a valuation load.
      Use this table to map valuation loads to portfolio groupings/types.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PNL00100"
      - "p&l"
      - "profit and loss"
      - "pnl"
      - "portfolio type"
      - "valuation load portfolio"

    primary_key: [ "ValuationLoadId", "PortfolioType" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "performance"
      - "pnl"
      - "portfolio"
      - "reference"

    columns:
      PortfolioType:
        type: string
        description: "Portfolio type."
        aliases: [ "portfolio type" ]

      ValuationLoadId:
        type: string
        description: "Valuation load id."
        aliases: [ "valuation load", "valuation load id" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "List P&L runs and their descriptions from PNL00100"
      - "Total return by instrument between two valuation loads"
      - "Breakdown of total return into price/coupon/accrual components"

  pnl00200:
    file_patterns: [ "*PNL00200*.nzf", "PNL00200.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      P&L run metadata (name, description, version) for P&L processing.
      Use this table to identify and describe P&L runs.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PNL00200"
      - "p&l"
      - "profit and loss"
      - "pnl"
      - "pnl run"
      - "run metadata"

    primary_key: [ "PlRunId" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "performance"
      - "pnl"
      - "run-metadata"

    columns:
      PlRunId:
        type: string
        description: "Pl run id."
        aliases: [ "pl run", "pl run id" ]

      RunVersion:
        type: int
        description: "Run version."
        aliases: [ "run version" ]

      RunName:
        type: string
        description: "Run name."
        aliases: [ "name", "run name" ]

      RunDescription:
        type: string
        description: "Run description."
        aliases: [ "description", "run description" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "List P&L runs and their descriptions from PNL00200"
      - "Total return by instrument between two valuation loads"
      - "Breakdown of total return into price/coupon/accrual components"

  pnl00300:
    file_patterns: [ "*PNL00300*.nzf", "PNL00300.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      P&L attribution metrics by instrument across two valuation loads (day 0 vs day 1).
      Use this table to decompose total return into price/coupon/accrual components.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PNL00300"
      - "p&l"
      - "profit and loss"
      - "pnl"
      - "payment terms"
      - "coupon"
      - "pricing"
      - "oas"
      - "price"
      - "return attribution"
      - "p&l attribution"

    primary_key: [ "Day1ValuationLoadID", "Day1InstrumentID" ]

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "attribution"
      - "payment-structure"
      - "performance"
      - "pnl"
      - "pricing"

    columns:
      Day1ValuationLoadID:
        type: string
        description: "Day1 valuation load id."
        aliases: [ "day1 valuation load", "day1 valuation load id" ]

      Day1InstrumentID:
        type: string
        description: "Day1 instrument id."
        aliases: [ "day1 instrument", "day1 instrument id" ]

      TotalReturn:
        type: float
        description: "Total return."
        aliases: [ "total return" ]

      PriceReturn:
        type: float
        description: "Price return."
        aliases: [ "price return" ]

      CouponReturn:
        type: float
        description: "Coupon return."
        aliases: [ "coupon return" ]

      AccrualReturn:
        type: float
        description: "Accrual return."
        aliases: [ "accrual return" ]

      Day0ValuationLoadID:
        type: string
        description: "Day0 valuation load id."
        aliases: [ "day0 valuation load", "day0 valuation load id" ]

      Day0InstrumentID:
        type: string
        description: "Day0 instrument id."
        aliases: [ "day0 instrument", "day0 instrument id" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "List P&L runs and their descriptions from PNL00300"
      - "Total return by instrument between two valuation loads"
      - "Breakdown of total return into price/coupon/accrual components"

  pnl01800:
    file_patterns: [ "*PNL01800*.nzf", "PNL01800.nzf" ]

    # Business meaning of the table (what it represents)
    description: >
      P&L index/path configuration (path, month, index type flags).
      Use this table to interpret index/path settings used for P&L calculations.

    # Helpful for NL queries: alternate names users might say
    aliases:
      - "PNL01800"
      - "p&l"
      - "profit and loss"
      - "pnl"
      - "index config"
      - "path config"

    # Optional: high-level topics/tags for retrieval
    business_tags:
      - "configuration"
      - "performance"
      - "pnl"

    columns:
      PATH:
        type: string
        description: "Path."
        aliases: [ "path" ]

      MONTH:
        type: int
        description: "Month."
        aliases: [ "month" ]

      IN_1MO:
        type: string
        description: "In 1 mo."
        aliases: [ "in 1 mo" ]

      INDEX_TYPE:
        type: string
        description: "Index type."
        aliases: [ "index type" ]

    # Optional: examples of how the business uses this table (helps NL/RAG)
    examples:
      - "List P&L runs and their descriptions from PNL01800"
      - "Total return by instrument between two valuation loads"
      - "Breakdown of total return into price/coupon/accrual components"

joins:
  - left_table: "pvr01000"
    right_table: "pvr00100"
    left_keys: [ "DmrRunID", "PortfolioID" ]
    right_keys: [ "DmrRunID", "PortfolioID" ]
    join_type: "inner"
    description: "Attach run scenario/date context to portfolios in that run"
    risk_notes: "1:1 or 1:many depending on pvr00100 uniqueness; prefer pvr00100 unique on DmrRunID"
  - left_table: "pvr01000"
    right_table: "pvr00400"
    left_keys: [ "PortfolioID" ]
    right_keys: [ "PortfolioID" ]
    join_type: "inner"
    description: "Expand portfolio to its instruments"
    risk_notes: "Fan-out: portfolio -> many instruments"
  - left_table: "pvr00400"
    right_table: "pvr00600"
    left_keys: [ "InstrumentID", "PortfolioID" ]
    right_keys: [ "InstrumentID", "PortfolioID" ]
    join_type: "left"
    description: "Attach analytics measures to instrument master"
    risk_notes: "If querying within a run context, also filter pvr00600 by DmrRunID to avoid mixing runs"
  - left_table: "pvr00600"
    right_table: "pvr01100"
    left_keys: [ "DmrRunID", "InstrumentID", "PortfolioID" ]
    right_keys: [ "DMRRunID", "InstrumentID", "PortfolioID" ]
    join_type: "left"
    description: "Attach characteristics/loan rollups to analytics"
  - left_table: "pnl00300"
    right_table: "krd00100"
    left_keys: [ "Day1ValuationLoadID", "Day1InstrumentID" ]
    right_keys: [ "ValuationLoadId", "InstrumentID" ]
    join_type: "left"
    description: "Link P&L attribution to KRD risk buckets"
    risk_notes: "KRD is many rows per instrument -> fan-out; aggregate KRD before joining if needed"
  - left_table: "pvr01500"
    right_table: "pvr01200"
    left_keys: [ "DMRRunID", "InstrumentID", "PaymentStructureID" ]
    right_keys: [ "DMRRunID", "InstrumentID", "PaymentStructureID" ]
    join_type: "left"
    description: "Attach detailed schedule/reset rules to payment structures"
    risk_notes: "Potential 1:1; if multiple schedule rows exist, aggregate or filter by effective dates."
  - left_table: "pvr01500"
    right_table: "pvr01400"
    left_keys: [ "DMRRunID", "InstrumentID", "PaymentStructureID" ]
    right_keys: [ "DMRRunID", "InstrumentID", "PaymentStructureID" ]
    join_type: "left"
    description: "Attach step-rate coupon reset details to payment structures"
  - left_table: "pvr01500"
    right_table: "pvr01600"
    left_keys: [ "DMRRunID", "InstrumentID", "PaymentStructureID" ]
    right_keys: [ "DMRRunID", "InstrumentID", "PaymentStructureID" ]
    join_type: "left"
    description: "Attach principal/notional paydown events to payment structures"
    risk_notes: "Likely 1:many (multiple paydown dates) -> aggregate before joining for rollups."
  - left_table: "pvr01500"
    right_table: "pvr01700"
    left_keys: [ "DMRRunID", "InstrumentID", "PaymentStructureID" ]
    right_keys: [ "DMRRunID", "InstrumentID", "PaymentStructureID" ]
    join_type: "left"
    description: "Attach range note bounds/observation rules to payment structures"
  - left_table: "pvr01500"
    right_table: "pvr01300"
    left_keys: [ "DMRRunID", "InstrumentID", "PortfolioID", "PortfolioDate" ]
    right_keys: [ "DMRRunID", "InstrumentID", "PortfolioID", "PortfolioDate" ]
    join_type: "left"
    description: "Attach option exercise fields to instrument within a portfolio snapshot"
  - left_table: "pvr01500"
    right_table: "pvr01900"
    left_keys: [ "DMRRunID", "InstrumentID", "PortfolioID", "PortfolioDate" ]
    right_keys: [ "DMRRunID", "InstrumentID", "PortfolioID", "PortfolioDate" ]
    join_type: "left"
    description: "Attach premium payment events to instrument within a portfolio snapshot"
    risk_notes: "1:many possible -> aggregate premium amounts by instrument/date."
  - left_table: "pvr01500"
    right_table: "pvr00500"
    left_keys: [ "InstrumentID", "PaymentStructureID" ]
    right_keys: [ "InstrumentID", "PaymentStructureID" ]
    join_type: "left"
    description: "Attach contractual payment terms to payment structures"
  - left_table: "krd00100"
    right_table: "krd00200"
    left_keys: [ "ValuationLoadId", "InstrumentID", "ScenarioType", "SegmentId" ]
    right_keys: [ "ValuationLoadId", "InstrumentID", "ScenarioType", "SegmentId" ]
    join_type: "left"
    description: "Attach additional KRD analytic values (if present) for the same valuation load/segment/scenario"
